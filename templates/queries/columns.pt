<div metal:use-macro="layout">
    <style type="text/css" media="screen" metal:fill-slot="css">
        
    </style>
    <div metal:fill-slot="header_buttons" style="display:inline-block;">
        <a class="inbutton" href="${request.route_url('concision.menu')}">Concision home</a>
    </div>
    <div metal:fill-slot="content">
        <script type="text/javascript" charset="utf-8">
            $(document).ready(function() {
                var $tabs = $("#query_type").tabs();
            });
        </script>
        
        <h4>2. Select columns</h4>
        <form action="${request.route_url('concision.query.edit_columns', query_id=the_query.id)}" method="post" accept-charset="utf-8">
            <table border="0" cellspacing="0" cellpadding="5">
                <div tal:repeat="(s, the_source) sources.items()">
                    <div tal:condition="s in qdata['sources']">
                        
                    <tr>
                        <td colspan="2" style="text-align:center;">
                            <strong>${the_source.label}</strong>
                        </td>
                    </tr>
                    <tr tal:repeat="c the_source.columns">
                        <td><label for="${s}.${c}">${the_source.column_labels[c]}</label></td>
                        <td><input type="checkbox" name="${s}.${c}" id="${s}.${c}" value="true" tal:attributes="checked '%s.%s' % (s, c) in existing_columns"/></td>
                    </tr>
                    </div>
                </div>
            </table>
            
            <input type="submit" value="Submit" name="form.submitted" class="inbutton" />
        </form>
    </div>
    
    
</div>