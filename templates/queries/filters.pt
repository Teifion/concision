<div metal:use-macro="layout">
    <style type="text/css" media="screen" metal:fill-slot="css">
        
    </style>
    <div metal:fill-slot="header_buttons" style="display:inline-block;">
        <a class="inbutton" href="${request.route_url('concision.menu')}">Concision home</a>
    </div>
    <div metal:fill-slot="content">
        <script type="text/javascript" charset="utf-8">
            
        </script>
        
        <h2>3. Select filters</h2>
        <!-- Existing filters -->
        
        <!-- Add new filter -->
        <table border="0" cellspacing="0" cellpadding="5">
            <tr>
                <th>Field</th>
                <th colspan="2">Condition</th>
                <th>&nbsp;</th>
            </tr>
            <tr tal:repeat="f existing_filters">
                <form action="${request.route_url('concision.query.edit_filter', query_id=the_query.id)}" method="post" accept-charset="utf-8">
                    <input type="hidden" name="filter_id" value="${repeat.f.index}" />
                <td>
                    ${structure:html_f.option_box("column", columns, custom_id="", selected=f['column'])}
                </td>
                <td>
                    ${structure:html_f.option_box("operator", operators, custom_id="", selected=f['operator'])}
                </td>
                <td style="padding:3px 5px;">
                    <input type="text" name="value" value="${f['value']}" style="display:inline"/>
                </td>
                <td class="button_cell">
                    <input type="submit" value="Save changes" name="form.submitted" class="uinbutton" />
                </td>
                </form>
            </tr>
            
            <tr>
                <form action="${request.route_url('concision.query.add_filter', query_id=the_query.id)}" method="post" accept-charset="utf-8">
                <td>
                    ${structure:html_f.option_box("column", columns, custom_id="")}
                </td>
                <td>
                    <select name="operator">
                        <option value="=">is equal to</option>,
                        <option value="!=">is not equal to</option>,
                        <option value="&gt;">is greater than</option>,
                        <option value="&gt;=">is greater than or equal to</option>,
                        <option value="&lt;">is less than</option>,
                        <option value="&lt;=">is less than or equal to</option>
                    </select>
                </td>
                <td style="padding:3px 5px;">
                    <input type="text" name="value" value="" style="display:inline"/>
                </td>
                <td class="button_cell">
                    <input type="submit" value="Add filter" name="form.submitted" class="uinbutton" />
                </td>
                </form>
            </tr>
        </table>
        
        <div tal:condition="len(existing_filters) > 0">
            <a href="${request.route_url('concision.query.edit', query_id=the_query.id)}" class="inbutton">Next</a>
        </div>
        
    </div>
    
    
</div>